@layer components {
  .map-pin-container {
    @apply relative flex flex-col items-center;
    filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.55));
  }

  .map-pin-disk {
    @apply relative flex h-12 w-12 items-center justify-center rounded-full border-2;
    border-color: var(--bronze-aged);
    background-color: var(--bg-abyss);
    box-shadow:
      inset 0 0 12px rgba(0, 0, 0, 0.65),
      0 0 18px rgba(0, 0, 0, 0.45);
  }

  .map-pin-disk::after {
    content: '';
    position: absolute;
    inset: 2px;
    border-radius: 999px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    opacity: 0.8;
  }

  .map-pin-disk-active {
    box-shadow:
      inset 0 0 14px rgba(255, 191, 0, 0.3),
      0 0 18px rgba(255, 191, 0, 0.45);
  }

  .map-pin-disk-icon {
    @apply relative z-10 text-2xl text-amber-100;
    text-shadow: 0 0 10px rgba(255, 191, 0, 0.4);
  }

  .map-pin-progress {
    @apply absolute inset-0 rounded-full opacity-70;
    background: conic-gradient(var(--bronze-aged) 0deg, rgba(255, 255, 255, 0.06) 0deg 360deg);
  }

  .map-pin-stem {
    @apply mt-1 h-3 w-0.5 rounded-full;
    background: linear-gradient(180deg, rgba(255, 191, 0, 0.45), rgba(140, 109, 63, 0.95));
  }

  .map-pin-point {
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 14px solid var(--bronze-aged);
    filter: drop-shadow(0 0 12px rgba(255, 191, 0, 0.25));
    transition: filter 200ms ease, transform 200ms ease;
  }

  .map-pin-point-active {
    filter: drop-shadow(0 0 18px rgba(255, 191, 0, 0.65));
    transform: translateY(-2px);
  }

  .map-pin-shadow {
    @apply absolute left-1/2 mt-1 h-2 w-6 -translate-x-1/2 rounded-full bg-black/40 blur-[2px] opacity-50;
  }

  .pin-finished-ping {
    @apply absolute inset-0 rounded-full border-2 opacity-75;
    border-color: var(--bronze-glow);
    animation: ping 1.5s cubic-bezier(0, 0, 0.2, 1) infinite;
  }
}
